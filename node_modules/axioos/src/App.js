import React,{useEffect,useState} from 'react'
import axios from "axios"
export default function App(props) {

  let [list,setState] = useState([]) 
  useEffect( async ()=>{
     let res = await axios.post("/api/lists");
     setState(res.data.data)

  },[])
   const  Todetail =(id)=>{
     console.log(id);
     props.history.push(`/detail/${id}`)
  }
  let Sort=async ()=>{
    let res = await axios.post("/api/sort");
    setState(res.data.data)
  }
 
  return (
    <div className="app">
      <button  onClick={()=>Sort() } > 排序 </button>
      {
        list.map((item,index)=>{
          return <div className="cons"  key={index}  onClick={()=>Todetail(item.id)}>
            <h2> {item.title} </h2>
            <span> {item.num} </span>
            <img src={item.img} alt=""/>
          </div>
        })
      }
    </div>
  )
}
